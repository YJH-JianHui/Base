server:
  port: 8080
  shutdown: graceful # 开启优雅停机，处理完存量请求再关闭

spring:
  # 1. 数据库配置 - 生产环境
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://192.168.80.200:3306/base?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: ${DB_PASSWORD:Abc123123} # 建议使用环境变量传入密码，更安全

    # 2. Hikari 连接池优化
    hikari:
      minimum-idle: 10 # 最小空闲连接数
      maximum-pool-size: 50 # 最大连接数，根据服务器配置调整
      idle-timeout: 30000
      max-lifetime: 1800000
      connection-timeout: 30000
      pool-name: RBAC-HikariPool

  # 3. Redis 配置 - 生产环境
  data:
    redis:
      host: prod-redis-server
      port: 6379
      database: 0
      password:
      lettuce:
        pool: # 生产环境建议配置连接池
          max-active: 100
          max-idle: 20
          min-idle: 5
          max-wait: 2000ms

# 4. MyBatis Plus 生产环境配置
mybatis-plus:
  configuration:
    # 生产环境必须关闭控制台 SQL 打印，否则性能会急剧下降且有泄露风险
    log-impl: org.apache.ibatis.logging.nologging.NoLoggingImpl
  global-config:
    db-config:
      logic-delete-field: deleted # 生产环境通常开启逻辑删除
      logic-delete-value: 1
      logic-not-delete-value: 0

# 5. JWT 配置
jwt:
  # JWT密钥（生产环境请修改为随机生成的强密钥，长度必须 >= 256位）
  secret-key: Base_Project_JWT_Secret_Key_Must_Be_At_Least_256_Bits_Long
  # Token过期时间（毫秒），默认7天
  expiration: 604800000

# 6. 生产环境日志配置
logging:
  level:
    root: info
    cn.kmdckj.base: info # 业务代码只打印 info 以上级别
  file:
    name: logs/platform.log # 将日志写入文件，便于以后做日志分析
  logback:
    rollingpolicy:
      max-history: 30 # 保留30天日志
      max-file-size: 100MB